# Project Structure

This project is divided into two main folders, each of them being the root of a separate project:
- `backend`: Contains the Python application which hosts the vector database and the AI assistant.
- `frontend`: Contains the React application which provides the user interface to interact with the backend.


When working on these components, it is expected that the developer will open each of these folders separately using their IDE of choice for either TypeScript (frontend) or Python (backend).

Op top of that, the root of the project contains the `compose.yaml` file which is used to spin up the containers that run the application. To run the containers, remember that you need the `OPENAI_API_KEY` environment variable set in a `.env` file next to the `compose.yaml` file.

## Backend

The backend is developed as a Python project, with the dependencies defined in the `requirements.txt` file. It is recommended that the developer uses `conda` or `venv` to create a separate environment where the dependencies can be installed.

The backend's main module, [riverflex_reviews](../backend/src/riverflex_reviews), is structured as follows:
- `main.py`: This is the main entry point of the application. It sets up the FastAPI application and the different endpoints.
- `config`: This package contains the configuration settings for the application. It checks that all required environment variables are set, and provides a singleton class that provides easy access to these values, while also providing type hints. This package will also load environment variables from an `.env` file in the working directly, which is useful for local development.
- `lib`: This package defines various utility functions that are used throughout the application.
- `vectordb`: This package implements the logic to manage the vector database. Since currently the database only includes one type of document, it contains a single repository (that provides the methods to handle the data) and a single model (that defines the structure of the data). However, this package could be extended to support additional entities.
- `assistant`: This package implements the LangGraph multi-agent assistant. This is currently very simple, since we only have one agent and one tool defined. However, this has been set up in such a way that it would be easy to add additional agents and tools in the future.
- `api`: This package contains the FastAPI endpoints that are used to interact with the logic implemented by this application. 
  - For all the endpoints that manage reviews in the vector database, the `/reviews` prefixed is used. Endpoints belonging to this path are implemented in the `api/reviews.py` file.
  - The endpoints that interact with the AI assistant are automatically generated by the `langchain_openai_api_bridge` library. Because of this, no additional file is present in the `api` package for these endpoints.

## Frontend

The backend is developed as a Next.js project. The project is structured as follows:

- `src`: This folder contains the source code specific to the application. 
  - `app`: This folder contains the main application component. Folders in this directory directly represent the routes of the application.
    - `global.css`: This file contains the global styles that are applied to the application. To be specific, here we define the DaisyUI theme and the custom Riverflex colors.
    - `layout.tsx`: This is the layout component of the application. It wraps the main content of the application with a header that can be used to navigate to the different pages.
    - `page.tsx`: This is the home page of the application it renders the chat component.
    - `import/page.tsx`: This page renders a form that allows the user to import new reviews into the vector database.
    - `api`: The `api` routes implement server side logic that must be triggered by the client. To be specific, here we have a route for the chat component to submit new messages to the backend and stream back the responses, as well as for the import page to submit new reviews to the vector database through the backend.
  - `components`: This folder contains the reusable components that are used throughout the application.
    - `chat.tsx`: This component renders the chat interface that allows the user to interact with the AI assistant.
    - `navbar.tsx`: This component renders the navigation bar that allows the user to navigate to the different pages of the application.
- `public`: This folder contains the static assets that are used in the application. For example, the logo that is displayed on the navbar. Note that the favicon is not stored here, since Next.js requires that it's placed in the `src/app` folder.